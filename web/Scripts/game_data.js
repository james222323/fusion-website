//⢰⠒⠒⠒⠒⠋⠛⠉⠉⣷⡎⠉⠉⢹⣦⠀⢸⡁⠈⢹⣧⡠⠚⠉⠀⠀⠀⠈⠑⢦⡄⣿⠀⠀⢹⣧⢀⡴⠊⠉⠀⠀⠈⠓⢤⣄⠀⣾⠉⠉⠑⣦⡀⠀⣶⠒⠒⣦⡀
//⢸⡀⠀⠀⣤⣤⣤⣶⣶⣿⡇⠀⠀⢸⣿⠀⢸⠀⠀⢸⣿⡇⠀⠀⢾⣿⣿⣦⣾⣿⠏⡇⠀⠀⢸⣿⡏⠀⠀⣰⣶⣶⡦⠀⠀⢻⣧⡏⠀⠀⠀⠘⢿⣄⣿⠀⢀⣿⡇
//⠸⡇⠀⠀⠛⠛⠛⢻⣍⠁⡇⠀⠀⢸⣿⡀⢸⡇⠀⢸⣿⢧⡀⠀⠀⠀⠉⠉⠙⢦⣄⡇⠀⠀⢸⣿⠀⠀⠀⣿⡏⠀⢠⠀⠀⠀⣿⡇⠀⠀⡀⠀⠈⢻⣿⠀⢸⣿⡇
//⠀⡇⠀⠀⢠⣤⣤⣼⣿⠀⣧⠀⠀⢸⣿⡇⢸⡇⠀⢸⣿⢈⣻⣶⣶⣦⣤⠀⠀⠈⣿⡇⠀⠀⢸⣿⡀⠀⠀⣿⡇⠀⣤⠀⠀⢀⣿⣧⠀⠀⣿⣄⠀⠀⠀⠀⢸⣿⠁
//⠀⡇⠀⠀⢸⣿⠋⠉⠁⠀⠹⡂⠀⠀⠙⠓⠋⠁⢀⣼⣿⡉⠀⠉⠓⠛⠋⠀⠀⣰⣿⡟⠀⠀⢸⣿⢣⡀⠀⠈⠛⠚⠁⠀⣠⣾⣿⣿⠀⢰⣿⠛⣦⠀⠀⠀⢸⣿⠀
//⠀⣧⣀⣀⣸⣿⠀⠀⠀⠀⠀⠙⢶⣤⣤⣤⣤⣴⣿⡿⠃⠙⢷⣦⣤⣤⣤⣶⣿⡿⠋⢧⣤⣤⣾⡿⠈⠻⢶⣤⣤⣤⣤⣾⣿⠟⠑⣿⣤⣼⣿⠀⠈⢷⣀⣀⣸⣿⠀
//⠀⠈⠛⠛⠛⠉⠀⠀⠀⠀⠀⠀⠀⠈⠉⠉⠉⠉⠀⠀⠀⠀⠀⠀⠈⠉⠉⠁⠀⠀⠀⠀⠈⠉⠁⠀⠀⠀⠀⠀⠉⠉⠉⠁⠀⠀⠀⠈⠉⠉⠁⠀⠀⠀⠙⠛⠛⠃⠀
//⠀⠀⢀⡤⠒⠋⠉⠉⠒⠢⣄⠀⠀⠀⠀⠀⣀⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣀⣀⣀⡠⠤⣄⠀⡠⠖⠋⠉⠉⠉⠑⣦⡄⠀⠀
//⠀⢠⠋⠀⠀⢠⣴⣦⡀⠀⠈⣿⡄⠀⠀⡸⠁⠀⠀⠉⣷⡄⠀⢠⠉⠉⠉⠉⠙⣦⡀⣰⠉⠉⠉⠉⢹⣾⠉⠁⠀⠀⠀⠀⠀⠀⣿⡟⠀⠀⣠⣶⣶⣦⣼⣿⠇⠀⠀
//⠀⡏⠀⠀⠀⣿⣟⣉⠣⣤⣤⣼⡷⠀⡰⠃⠀⡀⠀⠀⢸⣧⠀⢸⠀⠀⠀⠀⠀⢹⣧⠃⠀⠀⠀⠀⢸⣿⠀⠀⠀⢦⣾⣿⣿⠿⠟⢇⠀⠀⠈⠉⠉⠉⠉⠓⢤⡀⠀
//⠀⡇⠀⠀⢸⣿⡇⠈⠉⠉⠉⣿⡄⢰⠃⠀⢰⣿⡀⠀⠈⣿⡄⠀⠀⠀⢰⡀⠀⠀⢿⠀⠀⡆⠀⠀⢸⣿⡇⠀⠀⠈⠁⠀⢸⣷⠀⠈⢷⣤⣄⣀⣀⣀⠀⠀⠈⣿⡄
//⠀⠹⡄⠀⠀⠻⠿⠟⠀⠀⢀⣿⣷⠃⠀⠀⠈⠉⠁⠀⠀⢸⣧⠀⠀⠀⢸⣧⠀⠀⠀⠀⣼⡇⠀⠀⢸⣿⡇⠀⠀⢰⣲⣶⣾⣿⣀⡀⡴⠋⠛⠿⠿⠛⠀⠀⣠⣿⠇
//⠀⠀⠙⢶⣤⣀⣀⣠⣴⡀⢸⣿⠇⠀⢀⣖⣦⣤⣤⠀⠀⠈⣿⣄⠀⠀⠀⣿⡆⠀⠀⢠⣿⡇⠀⠀⢸⣿⡇⠀⠀⠈⠉⠁⠀⠀⠀⣿⣶⣤⣀⣀⣀⣠⣤⣾⡿⠏⠀
//⠀⠀⠀⠀⠉⠙⠛⠛⠋⠛⠿⠛⢶⣶⣾⡿⠁⠀⠈⢦⣤⣤⣼⣿⣄⣀⣠⣿⠹⣄⣀⣾⡿⢧⣀⣀⣼⣿⠰⣤⣤⣤⣴⣶⣶⣶⣿⡿⠃⠉⠙⠛⠛⠛⠋⠁


let lastUpdate = "1/8/2024 (v7.0)"
let gitcdnUrl = "https://cdnfs.sumibi.org"
//CHANGE IMAGES ON HOME PAGE TOO
const data = [
    {
        name: "Roblox",
        id: "rbx",
        genre: "Adventure",
        description: "Roblox is an online game platform and game creation system developed by Roblox Corporation that allows users to program games and play games created by other users.",
        link: `https://fusion.sumibi.org/web/fs-123we3gnb/rbx.html`,
        img: `${gitcdnUrl}/High Compressed/rbx.jpg`,
        file_based: true,
        publisher: "Roblox Corporation",
        controls: [
            "WASD",
        ],
        experimental: true
        

        // broken: true,
         //note: "Game won't load (WebSocket connection to wss failed)"
        // experimental: true
        //devices: "Computer, Mobile"
    },
    {
        name: "Madden Mobile 24",
        id: "md24",
        genre: "Sports",
        description: "Madden NFL 24 is an American football video game developed by EA Tiburon and published by EA Sports.",
        link: `https://fusion.sumibi.org/web/fs-123we3gnb/mad24.html`,
        img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/mad24.jpg`,
        file_based: true,
        publisher: "EA Sports",
        controls: [
            "WASD",
        ],
        experimental: true

    },
   // 1v1-lol
{
    name: "1v1 lol",
    id: "1v1-lol",
    genre: "Shooter",
    description: "1v1.lol is an online building simulator & third person shooting game.",
    link: "https://fs9a.sumibi.org/games/1v1-lol/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/1v1.jpeg`,
    publisher: "JustPlay.LOL",
    controls: [
        "WASD",
    ]
},

// 2048
{
    name: "2048",
    id: "2048",
    genre: "Puzzel",
    description: "In this game, you're trying to slide the number tiles on the grid to combine them to create a tile with the number 2048.",
    link: "https://fs9a.sumibi.org/games/2048/game/index.html",
    img: `https://cdnfs.sumibi.org/High%20Compressed/highcompress_2048.png`,
    publisher: "Solebon LLC",
    controls: [
        "WASD",
    ]
},

// Basketbros
{
    name: "Basket Bros",
    id: "Basketbros",
    genre: "Sports",
    description: "BasketBros is a charming basketball game with a cool retro look that can be played with friends or against CPUs.",
    link: "https://fs9a.sumibi.org/games/Basketbros/game/index.html",
    img: `https://cdnfs.sumibi.org/High%20Compressed/highcompress_basketbros-io.png`,
    publisher: "Blue Wizard Digital",
    controls: [
        "WASD, G",
    ]
},

// ab
{
    name: "Angry Birds",
    id: "ab",
    genre: "Puzzel",
    description: "Angry Birds is a Finnish action, puzzle, and strategy based media franchise created by Rovio Entertainment, and owned by Sega.",
    link: "https://fs9a.sumibi.org/games/ab/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/ab.png`,
    publisher: "Rovio Entertainment",
    controls: [
        "Drag",
    ]
},

// adcap
{
    name: "Advanture Capitilist",
    id: "adcap",
    genre: "Idle",
    description: "AdVenture Capitalist is a free-to-play incremental video game developed and published by Hyper Hippo Productions",
    link: "https://fs9a.sumibi.org/games/adcap/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/ac.jpeg`,
    publisher: "Hyper Hippo Entertainment",
    controls: [
        "",
    ]
},

// adofai
{
    name: "A Dance of Fire and Ice",
    id: "adofai",
    genre: "Rhythm",
    description: "A Dance of Fire and Ice is a strict rhythm game. Keep your focus as you guide two orbiting planets along a winding path without breaking their perfect equilibrium.",
    link: "https://fs9a.sumibi.org/games/adofai/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/adofi.jpg`,
    publisher: "7th Beat Games",
    controls: [
        "",
    ]
},

// aquapark
{
    name: "Aqua Park",
    id: "aquapark",
    genre: "Miscellaneous",
    description: "",
    link: "https://fs9a.sumibi.org/games/aquapark/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/ap.jpeg`,
    publisher: "ZORG Games",
    controls: [
        "WASD",
    ]
},

// awesometanks2
{
    name: "Awesome Tanks 2",
    id: "awesometanks2",
    genre: "Action",
    description: "Awesome Tanks 2 is a tank game where you battle against other tanks in a top-down 2D arena.",
    link: "https://fs9a.sumibi.org/games/awesometanks2/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/tanks2.jpg`,
    publisher: "Alexander Gette",
    controls: [
        "WASD or arrow keys to move Left mouse button to shoot Number keys to switch weapon",
    ]
},

// backrooms
{
    name: "Backrooms",
    id: "backrooms",
    genre: "Horror",
    description: "Based on a creepypasta, the Backrooms brings a nostalgic feeling of being lost in endless piles of empty rooms with fluorescent lights at full hum-buzz.",
    link: "https://fs9a.sumibi.org/games/backrooms/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/backrooms.png`,
    publisher: "IEP Games",
    controls: [
        "WASD",
        
    ]
    
},

// bad-ice -2
{
    name: "Bad ice 2",
    id: "bad-ice-2",
    genre: "Puzzel",
    description: "Bad Ice-Cream is a fun 2-player puzzle game where you play as an Ice Cream. Choose a flavor, and add fruit to your ice cream",
    link: "https://fs9a.sumibi.org/games/bad-ice-2/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/badice2.jpeg`,
    publisher: "Nitrome",
    controls: [
        "",
    ]
},

// bad-ice -3
{
    name: "Bad ice 3",
    id: "bad-ice-3",
    genre: "Puzzel",
    description: "Bad Ice-Cream is a fun 2-player puzzle game where you play as an Ice Cream. Choose a flavor, and add fruit to your ice cream",
    link: "https://fs9a.sumibi.org/games/bad-ice-3/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/badice3.jpg`,
    publisher: "Nitrome",
    controls: [
        "",
    ]
},

// bad-ice
{
    name: "Bad ice",
    id: "bad-ice",
    genre: "Puzzel",
    description: "Bad Ice-Cream is a fun 2-player puzzle game where you play as an Ice Cream. Choose a flavor, and add fruit to your ice cream",
    link: "https://fs9a.sumibi.org/games/bad-ice/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/badice.jpeg`,
    publisher: "Nitrome",
    controls: [
        "",
    ]
},

// basket-random
{
    name: "Basket Random",
    id: "basket-random",
    genre: "Sports",
    description: "Try to manage your two players in the form of sticks, rigid, and often uncontrollable, with the aim of scoring baskets.",
    link: "https://fs9a.sumibi.org/games/basket-random/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/basketrandome.jpeg`,
    publisher: "TwoPlayerGames",
    controls: [
        "W",
    ]
},

// basketball-stars
{
    name: "Basketball Stars",
    id: "basketball-stars",
    genre: "Sports",
    description: "Basketball Stars is a 2-player basketball game created by Madpuffers. Shoot b-ball with the likes of LeBron James, James Harden, and Stephen Curry in Basketball Stars!",
    link: "https://fs9a.sumibi.org/games/basketball-stars/game/index.html",
    img: `https://cdnfs.sumibi.org/High%20Compressed/highcompress_basketball_stars.png`,
    publisher: "Madpuffers",
    controls: [
        "",
    ]
},

// bb
{
    name: "Baldi Basics",
    id: "bb",
    genre: "Horror",
    description: "Baldi's Basics Classic, is a 2018 parody horror game developed and published by Micah McGonigal",
    link: "https://fs9a.sumibi.org/games/bb/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/bb.jpg`,
    publisher: "Micah McGonigal",
    controls: [
        "WASD",
    ]
},

// bf
{
    name: "Burger and Fights",
    id: "bf",
    genre: "Horror",
    description: "",
    link: "https://fs9a.sumibi.org/games/bf/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/bf.jpg`,
    publisher: "Donitz",
    controls: [
        "WASD",
    ]
},

// bison
{
    name: "Burrito Bison",
    id: "bison",
    genre: "Adventure",
    description: "In this game you must launch Burrito Bison as far as you can, bouncing, flying, and soaring through the skies to fend off the invasion of gummies",
    link: "https://fs9a.sumibi.org/games/bison/game/index.html",
    img: `https://cdnfs.sumibi.org/High%20Compressed/highcompress_burrito_bison.png`,
    publisher: "Juicy Beast",
    controls: [
        "Left Click",
    ]
},

// bitlife
{
    name: "Bitlife",
    id: "bitlife",
    genre: "Simulation",
    description: "BitLife is a life simulation game developed by CandyWriter",
    link: "https://fs9a.sumibi.org/games/bitlife/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/bitlife.webp`,
    publisher: "Candy Writer",
    controls: [
        "",
    ]
},

// bloxorz
{
    name: "Bloxorz",
    id: "bloxorz",
    genre: "Puzzel",
    description: "Bloxorz is a puzzle flash game that was developed by Damien Clarke and released on August 22, 2007.",
    link: "https://fs9a.sumibi.org/games/bloxorz/game/index.html",
    img: `https://cdnfs.sumibi.org/High%20Compressed/highcompress_bloxorz.png`,
    publisher: "Damien Clarke",
    controls: [
        "WASD",
    ]
},

// bmd
{
    name: "Bacon May Die",
    id: "bmd",
    genre: "Action",
    description: "Bacon May Die is a funny game which you can also play with two players on the same computer.",
    link: "https://fs9a.sumibi.org/games/bmd/game/index.html",
    img: `https://cdnfs.sumibi.org/High%20Compressed/highcompress_bacon_may_die.png`,
    publisher: "SnoutUp Games",
    controls: [
        "WASD",
    ]
},

// boxing-random
{
    name: "Boxing Random",
    id: "boxing-random",
    genre: "Sports",
    description: "Boxing Random is a 2-players ragdoll physics boxing game where you can enjoy rounds with different challenges.",
    link: "https://fs9a.sumibi.org/games/boxing-random/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/boxing.jpeg`,
    publisher: "TwoPlayerGames",
    controls: [
        "W",
    ]
},

// boxing2
{
    name: "Boxing Physics 2",
    id: "boxing2",
    genre: "Sports",
    description: "This is the sequel of the hit game Boxing Physics! Knock your opponents down ferociously like a real Mike Tyson but be sure to save some energy for your defense!",
    link: "https://fs9a.sumibi.org/games/boxing2/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/box2.jpg`,
    publisher: "Cool Bears Game Studio",
    controls: [
        "W",
    ]
},

// breakoid
{
    name: "Breakoid",
    id: "breakoid",
    genre: "Miscellaneous",
    description: "Breakoid is a block-breaking game that is a new take on the classic Arkanoid game genre with amazing graphics, visuals",
    link: "https://fs9a.sumibi.org/games/breakoid/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/break.jpg`,
    publisher: "supernice.games",
    controls: [
        "",
    ]
},

// btd4
{
    name: "Bloons TD 4",
    id: "btd4",
    genre: "Tower Defense",
    description: "Bloons Tower Defense is a series of tower defense games under the Bloons series created and produced by Ninja Kiwi.",
    link: "https://fs9a.sumibi.org/games/btd4/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/td4.jpg`,
    publisher: "Ninja Kiwi",
    controls: [
        "",
    ]
},

// car
{
    name: "Car Simulator",
    id: "car",
    genre: "Simulation",
    description: "3D Car Simulator is a very fun, fast-paced car driving simulator that allows you to test and show off your driving skills.",
    link: "https://fs9a.sumibi.org/games/car/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/cars.jpg`,
    publisher: "Faramel Games",
    controls: [
        "WASD",
    ]
},

// cell
{
    name: "Cell Machine",
    id: "cell",
    genre: "Miscellaneous",
    description: "Each cell on its own has a simple function, like moving or spawning other cells. But when combined, more interesting behavior emerges...",
    link: "https://fs9a.sumibi.org/games/cell/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/cell.jpg`,
    publisher: "Sam Hogan",
    controls: [
        "",
    ]
},

// cluster-rush
{
    name: "Cluster Rush",
    id: "cluster-rush",
    genre: "Skill",
    description: "Jump from truck to truck, slide and hang on to avoid falling in the Cluster Rush, a platformer / skill game.",
    link: "https://fs9a.sumibi.org/games/cluster-rush/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/rush.jpg`,
    publisher: "Landfall",
    controls: [
        "WASD",
    ]
},

// cookie
{
    name: "Cookie Clicker",
    id: "cookie",
    genre: "Clicker",
    description: "Cookie Clicker is a 2013 incremental game created by French programmer Julien Orteil Thiennot.",
    link: "https://fs9a.sumibi.org/games/cookie/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/cookcie.png`,
    publisher: "Orteil",
    controls: [
        "Left Click",
    ]
},

// crossy
{
    name: "Crossy Road",
    id: "crossy",
    genre: "Skill",
    description: "Crossy Road is an arcade video game released on 20 November 2014",
    link: "https://fs9a.sumibi.org/games/crossy/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/crossy.jpeg`,
    publisher: "Hipster Whale",
    controls: [
        "WASD",
    ]
},

// cube
{
    name: "Cubefield",
    id: "cube",
    genre: "Skill",
    description: "Cubefield is a fast-paced endless running game that tests your ability to dodge obstacles at high speed.",
    link: "https://fs9a.sumibi.org/games/cube/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/cube.jpg`,
    publisher: "Unknown",
    controls: [
        "Left, Right Arows",
    ]
},


// deathrun
{
    name: "Deathrun 3D",
    id: "deathrun",
    genre: "Skill",
    description: "Death Run 3D is an extremely fast game for true skillers only",
    link: "https://fs9a.sumibi.org/games/deathrun/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/death.jpeg`,
    publisher: "Filippo Ceffa",
    controls: [
        "WASD",
    ]
},

// doodle
{
    name: "Doodle Jump",
    id: "doodle",
    genre: "Miscellaneous",
    description: "Doodle Jump is a 2009 platformer video game developed and published by Igor and Marko Pusenjak, who make up the Croatian studio Lima Sky.",
    link: "https://fs9a.sumibi.org/games/doodle/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/OIP%20(3).jpeg`,
    publisher: "Lima Sky",
    controls: [
        "WASD",
    ]
},

// drift
{
    name: "Drift Hunters",
    id: "drift",
    genre: "Drving",
    description: "Drift Hunters is an awesome 3D car driving game in which you score points by drifting various cars.",
    link: "https://fs9a.sumibi.org/games/drift/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/drift.jpg`,
    publisher: "Ilya Kaminetsky",
    controls: [
        "WASD",
    ]
},

// drive
{
    name: "Drive Mad",
    id: "drive",
    genre: "Driving",
    description: "Drive Mad is a car game where you drive on a track filled with obstacles. Your aim is to reach the finish line in one piece.",
    link: "https://fs9a.sumibi.org/games/drive/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/drive.jpg`,
    publisher: "Martin Magni",
    controls: [
        "WASD",
    ]
},

// fbwg
{
    name: "Fireboy & Watergirl",
    id: "fbwg",
    genre: "Puzzel",
    description: "Fireboy and Watergirl is a popular cooperative platformer game where you control two elemental characters to collect diamonds and escape the forest temple.",
    link: "https://fs9a.sumibi.org/games/fbwg/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/fbwg.jpeg`,
    publisher: "Oslo Albet",
    controls: [
        "WASD",
    ]
},

// flappy
{
    name: "Flappy Bird",
    id: "flappy",
    genre: "Skill",
    description: "Flappy Bird was developed by Dong Nguyen, a Vietnamese video game artist and programmer, under his game development company .Gears",
    link: "https://fs9a.sumibi.org/games/flappy/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/falppy.jpg`,
    publisher: "DotGEARS",
    controls: [
        "Space",
    ]
},

// fruit
{
    name: "Fruit Ninja",
    id: "fruit",
    genre: "Skill",
    description: "Fruit Ninja is a video game developed by Halfbrick originally released on August 12, 2010. In the game, the player must slice fruit that is thrown into the air",
    link: "https://fs9a.sumibi.org/games/fruit/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/fninja.jpeg`,
    publisher: "Halfbrick",
    controls: [
        "Swipe",
    ]
},

// gd
{
    name: "Geometry Dash",
    id: "gd",
    genre: "Skill",
    description: "Geometry Dash is a side-scrolling music platforming game series developed by Robert Topala.",
    link: "https://fs9a.sumibi.org/games/gd/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/geo.jpg`,
    publisher: "RobTop",
    controls: [
        "Space",
    ]
},

// gta
{
    name: "Grand Theft Auto",
    id: "gta",
    genre: "Retro",
    description: "Grand Theft Auto is an action-adventure video game developed by DMA Design and published by BMG Interactive.",
    link: "https://fs9a.sumibi.org/games/gta/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/gta.jpg`,
    publisher: "Rockstar Games",
    controls: [
        "A: z  B: x L: q R: e Select: v Start: enter UP: up arrow DOWN: Down arrow LEFT: left arrow RIGHT: Right arrow",
    ]
},

// ib
{
    name: "Idle Breakout",
    id: "ib",
    genre: "Idle",
    description: "Idle Breakout is a brick breaking idle game where you must unlock and upgrades different types of balls which will destroy the bricks on your behalf!",
    link: "https://fs9a.sumibi.org/games/ib/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/ib.jpeg`,
    publisher: "Kodiqi",
    controls: [
        "",
    ]
},

// kart
{
    name: "Mario Kart",
    id: "kart",
    genre: "Retro",
    description: "Mario Kart 64 is a kart racing video game developed and published by Nintendo for the Nintendo 64.",
    link: "https://fs9a.sumibi.org/games/kart/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/kart.jpg`,
    publisher: "Nintendo",
    controls: [
        "A: z  B: x L: q R: e Select: v Start: enter UP: up arrow DOWN: Down arrow LEFT: left arrow RIGHT: Right arrow",
    ]
},

// mk4
{
    name: "Mortal Kombat 4",
    id: "mk4",
    genre: "Retro",
    description: "Mortal Kombat 4 is a 1997 fighting game, the fourth main installment in the Mortal Kombat franchise, and a sequel to 1995's Mortal Kombat 3.",
    link: "https://fs9a.sumibi.org/games/mk4/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/mk.jpg`,
    publisher: "Midway Games",
    controls: [
        "A: z  B: x L: q R: e Select: v Start: enter UP: up arrow DOWN: Down arrow LEFT: left arrow RIGHT: Right arrow",
    ]
},

// monkey-mart
{
    name: "Monkey Mart",
    id: "monkey-mart",
    genre: "Idle",
    description: "Monkey Mart is an idle/management game where you control a cute monkey character who is in charge of a supermarket. Plant fruits, harvest produce, move around from station to station to fill the stands with various food items.",
    link: "https://fs9a.sumibi.org/games/monkey-mart/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/mart.png`,
    publisher: "TinyDobbins",
    controls: [
        "WASD",
    ]
},

// retro-bowl
{
    name: "Retro Bowl",
    id: "retro-bowl",
    genre: "Sports",
    description: "Retro Bowl is an American style football game created by New Star Games.",
    link: "https://fs9a.sumibi.org/games/retro-bowl/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/retro.jpg`,
    publisher: "New Star Games",
    controls: [
        "Navigate - Mouse / Trackpad Select - LMB",
    ]
},


// shooter2
{
    name: "Funny Shooter 2",
    id: "shooter2",
    genre: "Shooter",
    description: "Funny Shooter 2 is a fun FPS game where you fight hordes of absurd enemies",
    link: "https://fs9a.sumibi.org/games/shooter2/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/funny.jpeg`,
    publisher: "GoGoMan",
    controls: [
        "WASD",
    ]
},

// slope
{
    name: "Slope",
    id: "slope",
    genre: "Skill",
    description: "Drive a ball in the 3D running game in Slope Game. Easy to controls, high speed, and addictive gameplay.",
    link: "https://fs9a.sumibi.org/games/slope/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/slope.jpeg`,
    publisher: "Rob Kay",
    controls: [
        "WASD",
    ],
    updated: true
},

// smash
{
    name: "Smash Remix",
    id: "smash",
    genre: "Retro",
    description: "Super Smash Bros. is a crossover platform fighting game series published by Nintendo.",
    link: "https://fs9a.sumibi.org/games/smash/game/index.html",
    img: `https://cdn.jsdelivr.net/gh/james222323/fs@master/img/smash.jpg`,
    publisher: "Nintendo",
    controls: [
        "A: z  B: x L: q R: e Select: v Start: enter UP: up arrow DOWN: Down arrow LEFT: left arrow RIGHT: Right arrow",
    ]
},


    // {
    //     name: "",
    //     id: "",
    //     genre: "",
    //     description: "",
    //     link: "",
    //     img: `${gitcdnUrl}/High Compressed/highcompress_.png`,
    //     file_based: false,
    //     publisher: "Unknown",
    //     controls: [
    //         "",
    //     ]
    // },
]

if(window.location.pathname.endsWith("games.html") || window.location.pathname.endsWith("games")){
    document.getElementById("gamecount").innerText = `Game count: ${data.length}\nUpdated: ${lastUpdate}`

    // var container = document.getElementsByClassName(`container`)
    // var img = document.getElementsByClassName(`game_img`)
    // var title = document.getElementsByClassName(`game_title`)
    // var genre = document.getElementsByClassName(`game_genre`)
    // var click = document.getElementsByClassName(`game_click`)
    
    if(localStorage.getItem("gameIcon") === "false"){
        let rec_containers = document.getElementsByClassName("rec_container")
        for(let j = 0; j < rec_containers.length; j++){
            rec_containers[j].getElementsByClassName("game_img")[0].style.display = "none"
            rec_containers[j].style.padding = "8px";
            rec_containers[j].style.height = "55px";
            rec_containers[j].style.shadowBox = "none";
            // div.style.marginTop = "7px";
            rec_containers[j].classList.add("container2");
            rec_containers[j].style.backgroundColor = "var(--sidebar-color)";
            rec_containers[j].getElementsByClassName("game_title")[0].style.transform = "translate(0, -2px)"
            rec_containers[j].getElementsByClassName("game_genre")[0].style.transform = "translate(0, 25px)"
            rec_containers[j].getElementsByClassName("game_title")[0].style.display = "block"
            rec_containers[j].getElementsByClassName("game_genre")[0].style.display = "block"
            rec_containers[j].getElementsByClassName("shadow")[0].style.display = "none"

            rec_containers[j].getElementsByClassName("#newgamebanner")[0].id = "newgamebanner1"
            rec_containers[j].getElementsByClassName("#newgamebanner")[0].innerHTML = "<span style='transform: translate(0px, -4px); position: absolute; left: 16px'>Recommendation</span>"
        }
    }
    //Generate Recommendations
    function randomGames(){
        let randomGames = [];

        for (let i = 0; i < 4; i++) {
          const randomIndex = Math.floor(Math.random() * data.length);
          randomGames.push(data[randomIndex])
        }

        let rec_containers = document.getElementsByClassName("rec_container")
        for(let j = 0; j < rec_containers.length; j++){
            rec_containers[j].getElementsByClassName("game_click")[0].onclick = function(){ viewGame(randomGames[j].id) }
            if(localStorage.getItem("gameIcon") !== "false"){
                rec_containers[j].getElementsByClassName("game_img")[0].src = randomGames[j].img
                rec_containers[j].getElementsByClassName("game_img")[0].style.opacity = 1
            }
            rec_containers[j].getElementsByClassName("shadow")[0].style.opacity = 1
            rec_containers[j].getElementsByClassName("game_title")[0].innerText = randomGames[j].name
            rec_containers[j].getElementsByClassName("game_genre")[0].innerText = "#" + randomGames[j].genre.split(" / ")[0]
            if(localStorage.getItem("thumbnailtext") === "true"){
                rec_containers[j].getElementsByClassName("shadow")[0].style.display = "block"
                rec_containers[j].getElementsByClassName("game_title")[0].style.display = "block"
                rec_containers[j].getElementsByClassName("game_genre")[0].style.display = "block"
            }

            rec_containers[j].style.animation = "none";
            rec_containers[j].style.opacity = 1;
        }
    }
    
    var rec_data = JSON.parse(localStorage.getItem("recommendations"))
    let recommendations = null
    if(rec_data && rec_data.length > 1){
        var genres = rec_data.map(function(element) {
          return element.output.genre;
        });
        rec_data.forEach(function(element) {
          delete element.date;
        });
        var day = new Date().getDay() + 1;
        var hours = new Date().getHours();
        var minutes = new Date().getMinutes();
        var time = (hours < 10 ? '0' + hours : hours) + '' + (minutes < 10 ? '0' + minutes : minutes);
        if(new Set(genres).size !== 1){ 
            neural_network(rec_data, {day:day,time:parseInt(time)}, "recommendations"); 
        } else { randomGames() }
    } else { randomGames() }

    loadGames()
    function loadGames(text){
        var count = 0
        var containers = []
        var favorities = []

        data.forEach(game => {
            var div = document.createElement("div");
            div.className = "container"
            div.id = "container"
            div.onclick = function(){ viewGame(game.id) }

            var game_click = document.createElement("a")
            game_click.className = "game_click"
            game_click.id = game.id
            game_click.herf = game.id

            if(localStorage.getItem("favorites") && localStorage.getItem("favorites").includes(game.id)){
                div.style.backgroundColor = localStorage.getItem("themeHex") || "#695CFE"
                div.style.color = "#fff"
                div.style.boxShadow = `0 2px 10px ${localStorage.getItem("themeHex") || "#695CFE"}`
            }

            if(game.broken === true || game.blocked == true){
                var broken_icon = document.createElement("i")
                broken_icon.className = "bx bx-error icon"
                broken_icon.id = "broken_icon"
                if(localStorage.getItem("gameIcon") === "false") broken_icon.id = "broken_icon1"
                if(game.blocked === true) broken_icon.style.color = "#febb01"
                game_click.appendChild(broken_icon)
            } else {
              var fav_icon = document.createElement("i")
              fav_icon.className = "bx bx-heart icon"
              fav_icon.id = "fav_icon"
              if(localStorage.getItem("mode") === "Light" && localStorage.getItem("gameIcon") !== "false"){
                  fav_icon.style.color = "#ccc"
              }
              if(localStorage.getItem("gameIcon") === "false") fav_icon.style.fontSize = "20px";
              if(localStorage.getItem("favorites") && localStorage.getItem("favorites").includes(game.id)){
                  fav_icon.onclick = function(){ unfavorite(game.id) }
                  fav_icon.className = "bx bxs-heart icon"
                  fav_icon.style.color = '#fb0202';
              } else {
                  fav_icon.onclick = function(){ favorite(game.id) }
              }
              game_click.appendChild(fav_icon)
            }

            if(localStorage.getItem("gameIcon") !== "false"){
                var game_img = document.createElement("img")
                game_img.className = "game_img"
                game_img.id = "img"
                game_img.src = game.img
                game_click.appendChild(game_img)
            }

            if(game.new === true){
                var newbanner = document.createElement("div")
                newbanner.id = "newgamebanner"
                if(localStorage.getItem("gameIcon") === "false") newbanner.id = "newgamebanner1"
                newbanner.innerText = "New!"
                if(localStorage.getItem("gameIcon") === "false") newbanner.innerHTML = "<span style='transform: translateY(-4px); position: absolute; left: 10px'>New!</span>"
                game_click.appendChild(newbanner)
            }

            if(game.updated === true){
                var newbanner = document.createElement("div")
                newbanner.id = "newgamebanner"
                if(localStorage.getItem("gameIcon") === "false") newbanner.id = "newgamebanner1"
                newbanner.innerText = "Updated!"
                if(localStorage.getItem("gameIcon") === "false") newbanner.innerHTML = "<span style='transform: translateY(-4px); position: absolute; left: 16px'>Updated!</span>"
                newbanner.style.width = "90px"
                newbanner.style.backgroundColor = "#f6290e"
                game_click.appendChild(newbanner)
            }

            if(game.experimental === true){
                var newbanner = document.createElement("div")
                newbanner.id = "newgamebanner"
                if(localStorage.getItem("gameIcon") === "false") newbanner.id = "newgamebanner1"
                newbanner.innerText = "Experimental!"
                if(localStorage.getItem("gameIcon") === "false") newbanner.innerHTML = "<span style='transform: translate(-6px, -4px); position: absolute; left: 16px'>Experimental!</span>"
                newbanner.style.width = "105px"
                newbanner.style.backgroundColor = "#f6920e"
                game_click.appendChild(newbanner)
            }

            if(localStorage.getItem("gameIcon") !== "false"){
                var shadow = document.createElement("div")
                shadow.className = "shadow"
                shadow.id = "shadow"
                game_click.appendChild(shadow)
            }

            var game_title = document.createElement("div")
            game_title.className = "game_title"
            game_title.id = "title"
            game_title.innerText = game.name
            if(localStorage.getItem("mode") === "Light" && localStorage.getItem("gameIcon") !== "false"){
                game_title.style.color = "#fff"
                document.getElementById("rgs_title").style.color = "#fff"
            }
            game_click.appendChild(game_title)

            var game_genre = document.createElement("div")
            game_genre.className = "game_genre"
            game_genre.id = "genre"
            game_genre.innerText = "#" + game.genre.split(" / ")[0]
            if(localStorage.getItem("mode") === "Light" && localStorage.getItem("gameIcon") !== "false"){
                game_genre.style.color = "#ccc"
                document.getElementById("rgs_genre").style.color = "#ccc"
            }
            game_click.appendChild(game_genre)

            div.appendChild(game_click)

            if(text === true || localStorage.getItem("thumbnailtext") === "true"){
                game_title.style.display = "block"
                game_genre.style.display = "block"
                if(shadow) shadow.style.display = "block"
                if(fav_icon){ fav_icon.style.display = "block" } else { broken_icon.style.display = "block" }
            }

            if(localStorage.getItem("gameIcon") === "false"){
                div.style.padding = "8px";
                div.style.height = "55px";
                div.style.shadowBox = "none";
                // div.style.marginTop = "7px";
                div.classList.add("container2");
                div.style.backgroundColor = "var(--sidebar-color)";
                game_title.style.transform = "translate(0, -2px)"
                game_genre.style.transform = "translate(0, 25px)"
                game_genre.style.opacity = 1
                game_title.style.display = "block"
                game_genre.style.display = "block"
                if(fav_icon){ fav_icon.style.display = "block" } else { broken_icon.style.display = "block" }

                var randomGameSelector = document.getElementById("randomSelector")
                randomGameSelector.style.padding = "8px";
                randomGameSelector.style.height = "55px";
                randomGameSelector.style.shadowBox = "none";
                randomGameSelector.style.backgroundColor = "var(--sidebar-color)";
                document.getElementById("rgs_img").style.display = "none"
                document.getElementById("rgs_shadow").style.display = "none"
                document.getElementById("rgs_title").style.transform = "translate(0, -2px)"
                document.getElementById("rgs_genre").style.transform = "translate(0, 25px)"
                document.getElementById("rgs_genre").style.opacity = 1
            }

            if(localStorage.getItem("favorites") && localStorage.getItem("favorites").includes(game.id)){
                favorities.push(div)
            } else {
                containers.push(div)
            }

            count++
        })

        if(favorities.length !== 0){
            favorities[0].style.marginLeft = "0"
        } else {
            containers[0].style.marginLeft = "0"
        }

        favorities.forEach(favorite => {
            // referenceNode = document.getElementById("gameViewFullscreen")
            // referenceNode.parentNode.insertBefore(favorite, referenceNode.nextSibling)
            document.getElementById("gamebar").appendChild(favorite)
        })

        containers.forEach(container => {
            // referenceNode = document.getElementById("gameViewFullscreen")
            // referenceNode.parentNode.insertBefore(container, referenceNode.nextSibling)
            document.getElementById("gamebar").appendChild(container)
        })

        resizeWidth();
    }

    function removeGames(){
        var containers = document.getElementsByClassName("container")
        const length = containers.length
        for(let i = 0; i < length; i++){
            containers[Math.abs(-data.length + i) - 1].remove()
        }
    }

    let selectOptions = []
    for(let i = 0; i < data.length; i++){
        if(data[i].genre.includes(" / ")){
            for(let o = 0; o < data[i].genre.split(" / ").length; o++){
                selectOptions.push(data[i].genre.split(" / ")[o])
            }
        } else {
            selectOptions.push(data[i].genre)
        }
    }
    let selectOptionsList = []
    selectOptions.forEach((o) => {
        if(!selectOptionsList.includes(o)){
            selectOptionsList.push(o)
        }
    })
    selectOptionsList.sort(function(a, b){
        if(a < b) { return -1; }
        if(a > b) { return 1; }
        return 0;
    })
    selectOptionsList.unshift("- Experimental")
    selectOptionsList.unshift("- New!")
    for(let i = 0; i < selectOptionsList.length; i++){
        var x = document.getElementById("filterSelect");
        var option = document.createElement("option")
        option.text = selectOptionsList[i];
        x.add(option);
    }
    var select = document.getElementById("filterSelect")
    select.onchange = async (event) => {
        var currentContainers = document.getElementsByClassName("container")
        var inputText = event.target.value;

        let rec_containers = document.getElementsByClassName("rec_container")
        for(let j = 0; j < rec_containers.length; j++){
            if(inputText === "Filter - None"){ rec_containers[j].style.display = "inline-table" } else { rec_containers[j].style.display = "none" }
        }

        if(inputText === "Filter - None"){
            for(let i = 0; i < currentContainers.length; i++){ currentContainers[i].style.display = "inline-table"}
            return;
        }

        for(let i = 0; i < currentContainers.length; i++){ currentContainers[i].style.display = "none"}

        if(inputText === "- New!"){
            var filter = []
            for(let i = 0; i < data.length; i++){
                for(let o = 0; o < currentContainers.length; o++){
                    if(data[i].new === true && currentContainers[o].getElementsByClassName("game_title")[0].textContent === data[i].name) filter.push(currentContainers[o])
                    if(i === data.length - 1 && o === currentContainers.length - 1){
                        filter.forEach(con => {
                            con.style.display = "inline-table"
                        })
                    }
                }
            }
        }

        if(inputText === "- Experimental"){
            var filter = []
            for(let i = 0; i < data.length; i++){
                for(let o = 0; o < currentContainers.length; o++){
                    if(data[i].experimental === true && currentContainers[o].getElementsByClassName("game_title")[0].textContent === data[i].name) filter.push(currentContainers[o])
                    if(i === data.length - 1 && o === currentContainers.length - 1){
                        filter.forEach(con => {
                            con.style.display = "inline-table"
                        })
                    }
                }
            }
        }

        var filter = []
        for(let i = 0; i < data.length; i++){
            for(let o = 0; o < currentContainers.length; o++){
                if(data[i].genre.includes(inputText) && currentContainers[o].getElementsByClassName("game_title")[0].textContent === data[i].name) filter.push(currentContainers[o])
                if(i === data.length - 1 && o === currentContainers.length - 1){
                    filter.forEach(con => {
                        con.style.display = "inline-table"
                    })
                }
            }
        }
    }

    var clickedStar = false
    function favorite(id){
        if(document.getElementById("gameView") !== "block") clickedStar = true
        for(let i = 0; i < data.length; i++){
            if(data[i].id === id){
                var favorites = localStorage.getItem("favorites")
                if(favorites && favorites.includes(data[i].id)) return;

                var favoritesList = favorites + `, ${data[i].id}`
                if(favorites === null) favoritesList = `${data[i].id}`
                localStorage.setItem("favorites", favoritesList)

                document.getElementById("favoriteOption").onclick = function(){ unfavorite(data[i].id) }
                document.getElementById("favStarOption").className = "bx bxs-heart icon"
                document.getElementById("favoriteTextOption").innerText = "Unfavorite"

                document.getElementById("favoriteOption2").onclick = function(){ unfavorite(data[i].id) }
                document.getElementById("favStarOption2").className = "bx bxs-heart icon"
                document.getElementById("favoriteTextOption2").innerText = "Unfavorite"

                document.getElementById("cbfavorite").onclick = function(){ unfavorite(data[i].id) }
                document.getElementById("cbfavoriteicon").className = "bx bxs-heart cbicon"
                document.getElementById("cbfavoriteicon").style.color = '#fb0202';

                removeGames();
                loadGames();
                sendSiteData();
                createAlertBox({ color: "green", text: "Favorited Game"})
                return;
            }
        }
    }

    function unfavorite(id){
      if(document.getElementById("gameView") !== "block") clickedStar = true
      for(let i = 0; i < data.length; i++){
          if(data[i].id === id){
              var favorites = localStorage.getItem("favorites")
              if(favorites && !favorites.includes(data[i].id)) return;

              if(favorites.includes(`, ${data[i].id}`)){
                  localStorage.setItem("favorites", favorites.replace(`, ${data[i].id}`, ""))
              } else {
                  localStorage.setItem("favorites", favorites.replace(`${data[i].id}`, ""))
              }

              document.getElementById("favoriteOption").onclick = function(){ favorite(data[i].id) }
              document.getElementById("favStarOption").className = "bx bx-heart icon"
              document.getElementById("favoriteTextOption").innerText = "Favorite"

              document.getElementById("favoriteOption2").onclick = function(){ favorite(data[i].id) }
              document.getElementById("favStarOption2").className = "bx bx-heart icon"
              document.getElementById("favoriteTextOption2").innerText = "Favorite"

              document.getElementById("cbfavorite").onclick = function(){ favorite(data[i].id) }
              document.getElementById("cbfavoriteicon").className = "bx bx-heart cbicon"

              removeGames();
              loadGames();
              sendSiteData();
              createAlertBox({ color: "red", text: "Unfavorited Game"})
              return;
          }
      }
    }

    var currentGame = null
    function viewGame(gameID){
        if(clickedStar === true) return clickedStar = false
        for(let i = 0; i < data.length; i++){
            if(data[i].id === gameID){
                if(localStorage.getItem("instantGame") === "true") return playGame(data[i].id)

                let fullscreen = document.getElementById("gameViewFullscreen")
                let title = document.getElementById("gameViewTitle")
                let img = document.getElementById("gameViewImg")
                let desc = document.getElementById("gameViewDescription")
                let genre = document.getElementById("gameViewGenre")
                let publisher = document.getElementById("gameViewPublisher")
                let devices = document.getElementById("gameViewDevices") || null
                let playBtn = document.getElementById("playButton")

                fullscreen.style.display = "block"
                title.innerText = data[i].name
                img.src = data[i].img
                desc.innerText = data[i].description
                genre.innerText = data[i].genre.replaceAll(" / ", ", ")
                publisher.innerText = data[i].publisher
                playBtn.onclick = function(){ playGame(data[i].id) }
                document.body.style.overflow = "hidden"
                if(data[i].devices){ devices.innerText = data[i].devices } else { devices.innerText = "Computer" };
                currentGame = data[i].id
                document.getElementById("gameviewrb").onclick = function(){ reportform(data[i].name) }

                if(localStorage.getItem("favorites") && localStorage.getItem("favorites").includes(data[i].id)){
                    document.getElemeFntById("favoriteOption2").onclick = function(){ unfavorite(data[i].id) }
                    document.getElementById("favStarOption2").className = "bx bxs-heart icon"
                    document.getElementById("favoriteTextOption2").innerText = "Unfavorite"
                } else {
                    document.getElementById("favoriteOption2").onclick = function(){ favorite(data[i].id) }
                    document.getElementById("favStarOption2").className = "bx bx-heart icon"
                    document.getElementById("favoriteTextOption2").innerText = "Favorite"
                }

                if(document.getElementById("splashOptions").style.display = "block") document.getElementById("splashOptions").style.display = "none"
            }
        }
    }

    let clickcount = 0
    let clickedView = false
    function clicked(){
        clickedView = true
    }

    document.addEventListener("click", () => {
        if(document.getElementById("gameViewFullscreen").style.display === "block"){
            if(document.getElementById("reportform").style.display === "block") return;
            if(clickedView === true){
                clickedView = false
            } else {
                if(clickcount === 0) return clickcount = 1
                clickedView = false
                clickcount = 0
                document.getElementById("gameViewFullscreen").style.display = "none"
                document.body.style.overflow = "visible"
            }
        }
    })

    document.addEventListener("keydown", (event) => {
        if(document.getElementById("reportform").style.display === "block") return;
        if(document.getElementById("gameViewFullscreen").style.display === "block"){
            if(event.key === "Enter" || event.code === "Space") playGame(currentGame);
        }
        if(document.getElementById("gameViewFullscreen").style.display === "block" && event.key === "Escape"){
            if(clickedView === true){
                clickedView = false
            } else {
                clickedView = false
                clickcount = 0
                document.getElementById("gameViewFullscreen").style.display = "none"
                document.body.style.overflow = "visible"
            }
        }
    })

    const options = {
        shouldSort: true,
        threshold: 0.6,
        location: 0,
        distance: 100,
        maxPatternLength: 32,
        minMatchCharLength: 1,
        keys: [".textContent"]
    }

    function search(){
        let input = document.getElementById("searchbar").value
        input = input.toLowerCase()

        document.getElementById("filterSelect").options[0].selected = true;

        let rec_containers = document.getElementsByClassName("rec_container")
        for(let j = 0; j < rec_containers.length; j++){
            if(input === ""){ rec_containers[j].style.display = "inline-table" } else { rec_containers[j].style.display = "none" }
        }
        
        var gamesCon = document.querySelectorAll("#container")
        var titles = document.getElementsByClassName("game_title")
        var list = []

        for(i = 0; i < titles.length; i++){
            list.push(titles[i].textContent)
        }

        var options = {
            includeScore: true,
            threshold: 0.4,
        }
        var fuse = new Fuse(list, options)
        var result = fuse.search(input)
        var final = []
        for(i = 0; i < result.length; i++){
            final.push(result[i].item)
        }

        var conArray = Array.from(gamesCon)
        var matching = conArray.filter(con => final.includes(con.getElementsByClassName("game_title")[0].textContent))
        var not_matching = conArray.filter(con => !final.includes(con.getElementsByClassName("game_title")[0].textContent))
        matching.forEach(item => { item.style.display = "inline-table" })
        not_matching.forEach(item => { item.style.display = "none" })

        if(input === "") gamesCon.forEach(con => { con.style.display = "inline-table" })
        
    }

    window.currentPlay = null
    function playGame(gameID, onload){
        for(let i = 0; i < data.length; i++){
            if(data[i].id === gameID){
                console.log("e r")
                window.currentPlay = gameID
                document.getElementById("gameViewFullscreen").style.display = "none"

                document.getElementById("gamepage").style.display = "block"
                document.getElementById("mainpage").style.display = "none"
                document.getElementById("gamePageTitle").innerText = data[i].name
                document.getElementById("gamePageDesc").innerText = data[i].description
                if(onload === true){
                    document.getElementById("fullscreenGame").style.opacity = 1
                    document.getElementById("playbtnoverlay").style.display = "block"
                    document.getElementById("gameIframe").src = ""
                    document.getElementById("playbtnoverlay").onclick = function(){ playGame(data[i].id); document.getElementById("gameIframe").focus(); }
                } else {
                    document.getElementById("fullscreenGame").style.opacity = 0.7
                    document.getElementById("gameIframe").src = data[i].link
                    document.getElementById("playbtnoverlay").style.display = "none"
                }
                document.getElementById("controls").style.transform = `translateY(${-70 + (data[i].controls.length * -25)}px)`
                document.getElementById("controlsText").innerText = data[i].controls.join("\n")
                if(localStorage.getItem("favorites") && localStorage.getItem("favorites").includes(data[i].id)){
                    document.getElementById("favoriteOption").onclick = function(){ unfavorite(data[i].id) }
                    document.getElementById("favStarOption").className = "bx bxs-heart icon"
                    document.getElementById("favoriteTextOption").innerText = "Unfavorite"

                    document.getElementById("cbfavorite").onclick = function(){ unfavorite(data[i].id) }
                    document.getElementById("cbfavoriteicon").className = "bx bxs-heart cbicon"
                    document.getElementById("cbfavoriteicon").style.color = '#fb0202';
                } else {
                    document.getElementById("favoriteOption").onclick = function(){ favorite(data[i].id) }
                    document.getElementById("favStarOption").className = "bx bx-heart icon"
                    document.getElementById("favoriteTextOption").innerText = "Favorite"

                    document.getElementById("cbfavorite").onclick = function(){ favorite(data[i].id) }
                    document.getElementById("cbfavoriteicon").className = "bx bx-heart cbicon"
                }

                if(document.getElementById("gameOptions").style.display = "block") document.getElementById("gameOptions").style.display = "none"

                resizeWidth();

                if(data[i].broken){
                    document.getElementById("importantMessage").style.display = "block"
                    document.getElementById("importantMessage").style.backgroundColor = "red"
                    document.getElementById("mbttitle").innerHTML = `This game may be experiencing issues.`
                    document.getElementById("messageBannerText").innerHTML = `This game may not be working as expected. <a class="errormessage">Error: ${data[i].note}</a>`
                }

                if(data[i].blocked){
                    document.getElementById("importantMessage").style.display = "block"
                    document.getElementById("importantMessage").style.backgroundColor = "#febb01"
                    document.getElementById("mbttitle").innerHTML = `This game is blocked.`
                    document.getElementById("messageBannerText").innerHTML = `This may not affect you depending on where you are and on what device.`
                }

                if(data[i].experimental){
                    document.getElementById("importantMessage").style.display = "block"
                    document.getElementById("importantMessage").style.backgroundColor = "#f6920e"
                    document.getElementById("mbttitle").innerHTML = `This game is experimental.`
                    document.getElementById("messageBannerText").innerHTML = `Meaning this game is in testing and may or may not work properly. Feedback is appreciated.`
                }

                document.getElementById("cbbrform").onclick = function(){ reportform(data[i].name) }

                if(localStorage.getItem("nav") === "Sidebar" && body.querySelector('nav').classList.value === "sidebar") body.querySelector('nav').classList.toggle("close")
                // document.getElementById("gameIframe").focus();
                window.scrollTo(0, 0)
                document.body.style.overflow = "visible"
                trackGameData(data[i].id, null)
                window.location.hash = `#${data[i].id}`

                if(localStorage.getItem("cookie_preferences") !== "Only_Necessary"){
                    var rec_data = JSON.parse(localStorage.getItem("recommendations"))
                    var day = new Date().getDay() + 1;
                    var hours = new Date().getHours();
                    var minutes = new Date().getMinutes();
                    var time = (hours < 10 ? '0' + hours : hours) + '' + (minutes < 10 ? '0' + minutes : minutes);
                    console.log(data[i].genre.split(" / "))
                    if(!rec_data){
                        for(let j = 0; j < data[i].genre.split(" / ").length; j++){
                            localStorage.setItem("recommendations", JSON.stringify([{input: {day: day, time: parseInt(time)}, output: {genre: data[i].genre.split(" / ")[j]}, date: Date.now()}]))
                        }
                    } else {
                        for(let j = 0; j < data[i].genre.split(" / ").length; j++){
                            rec_data.push({input: {day: day, time: parseInt(time)}, output: {genre: data[i].genre.split(" / ")[j]}, date: Date.now()})
                            localStorage.setItem("recommendations", JSON.stringify(rec_data))
                        }
                    }
                }
            }
        }
    }

    // let iFrameFocused = false
    // function checkFocus(){
    //     if(document.getElementById("gamepage").style.display === "block"){
    //         if(document.activeElement === document.getElementById("gameIframe")){
    //             document.body.style.overflow = "hidden"
    //             document.getElementById("gameIframe").style.opacity = 1
    //             intervalManager(false);
    //         } else {
    //             document.body.style.overflow = "visible"
    //             document.getElementById("gameIframe").style.opacity = 0.5
    //             intervalManager(true);
    //         }
    //     }
    // }

    // function intervalManager(flag){
    //     if(flag === true){
    //         let interval = setInterval(() => { checkFocus() }, 100)
    //     } else {
    //         clearInterval(interval);
    //     }
    // }
    // document.body.onfocus = function(){ checkFocus() }

    function checkFocus(){
        if(document.getElementById("gamepage").style.display === "block"){
            if(document.activeElement === document.getElementById("gameIframe")){
                // document.body.style.overflow = "hidden"
                document.getElementById("fullscreenGame").style.opacity = 1
            } else {
                // document.body.style.overflow = "visible"
                if(document.getElementById("playbtnoverlay").style.display !== "block") document.getElementById("fullscreenGame").style.opacity = 0.7
            }
        }
    }

    function focusGame(){
        document.getElementById("gameIframe").focus();
        checkFocus();
    }

    document.body.onclick = function(){ checkFocus() }
    const listener = window.addEventListener("blur", () => {
        if(document.activeElement === document.querySelector("iframe")){
            // console.log("clicked iframe")
            checkFocus()
        }
        window.removeEventListener("blur", listener)
    })
    // window.addEventListener('keydown', (e) => {
    //     console.log(e)
    //     e.preventDefault();
    // })

    // window.dispatchEvent(new KeyboardEvent('keydown', {
    //     'key': 'b'
    // }));

    function controls(){
        if(document.getElementById("controls").style.display !== "block"){
            document.getElementById("controls").style.display = "block"
        } else {
            document.getElementById("controls").style.display = "none"
        }
    }

    var oldUrl = window.location.href;
    window.addEventListener("hashchange", function(){
        checkHash();
    })

    function checkHash(onload){
        var newHash = window.location.hash
        if(newHash === "#" || newHash === ""){
            gamepage();
        } else {
            data.forEach(game => { 
                if(game.id === newHash.slice(1) && onload === true) return playGame(newHash.slice(1), true);
                if(game.id === newHash.slice(1) && window.currentPlay !== game.id) return playGame(newHash.slice(1));
            })
        }
    }

    // document.addEventListener("touchstart", function(event){event.preventDefault()}, true);

    function hideBar(){
        document.getElementById("controlbar").style.display = "none"
        document.getElementById("gameIframe").style.height = "100%"

        // var stylesheet = document.styleSheets[0]
        // let elementRules;
        // let elementRules2;

        // for(let i = 0; i < stylesheet.cssRules.length; i++){
        //     if(stylesheet.cssRules[i].selectorText === ".gameIframeFullscreen"){
        //         elementRules = stylesheet.cssRules[i]
        //     }

        //     if(stylesheet.cssRules[i].selectorText === ".gameIframeFull"){
        //         elementRules2 = stylesheet.cssRules[i]
        //     }
        // }

        if(inWindowedFullscreen === true) document.getElementById("exitBtn").style.display = "block"
        // elementRules.style.setProperty("height", "100%")
        // elementRules2.style.setProperty("height", "100%")
    }

    function showBar(){
        document.getElementById("controlbar").style.display = "block"

        // var stylesheet = document.styleSheets[0]
        // let elementRules;
        // let elementRules2;

        // for(let i = 0; i < stylesheet.cssRules.length; i++){
        //     if(stylesheet.cssRules[i].selectorText === ".gameIframeFullscreen"){
        //         elementRules = stylesheet.cssRules[i]
        //     }

        //     if(stylesheet.cssRules[i].selectorText === ".gameIframeFull"){
        //         elementRules2 = stylesheet.cssRules[i]
        //     }
        // }

        // document.getElementById("exitBtn").style.display = "none"
        // elementRules.style.setProperty("height", "calc(100% - 60px)")
        // elementRules2.style.setProperty("height", "calc(100% - 60px)")
    }
}
